Redux
===
Redux는 JavaScript 앱들을 위한 예측가능한 상태 컨테이너이다.

왜 Redux여야만 하는가?
---
기존의 Redux와 비슷한 역할을 수행하는 Flux 패턴이 존재한다. 그런데 왜 사람들은 Redux를 사용할까? Flux의 문제들을 알아보자.

#### Flux의 문제점 1: 비즈니스 로직과 현재 애플리케이션의 상태가 함께 스토어에 존재한다.
이 문제는 핫 리로딩(hot re-loading) 시에 곤란한 상황을 발생시킨다. 비즈니스 로직을 통해서 상태변경된 결과를 핫 리로딩 해버리면 현재 애플리케이션의 상태가 스토어(Store)에 공존하고있기 때문에, 기존의 상태가 초기화되기 때문이다. 또한 기존의 스토어 이벤트 구독(Subscription)에 문제가 발생한다.

#### Flux의 문제점 2: 애플리케이션의 상태가 매순간 변화한다.
이 문제는 디버깅에 어려움을 준다. 계속해서 상태가 변화하면 이전 상태에 접근하기가 어렵기 때문이다. 단지 계속해서 객체의 포인터를 변경하는 방식의 상태 변경은 이런 점에서 문제가 됐다.

Redux는 위 문제를 리듀서(reducer)를 통해서 해결한다. 리듀서는 액션(action)에 기록된대로 실제로 상태를 변환시켜주는 비즈니스 로직을 가진 함수이다. 실제로 애플리케이션의 상태를 갖고있지는 않으며, 단순히 비즈니스 로직을 복사한 상태객체에 적용시켜 반환하는 역할을 수행한다.

이를 통해서 핫 리로딩시에도 스토어의 상태, 구독정보를 유지시킬 수 있게됐으며, 복사한 상태를 변경시켜서 전달하기 때문에 위의 두 문제로부터 완전히 벗어났다고 할 수 있다.

그렇다면 이제부터 달라진 Redux에 대해서 자세하게 알아보도록한다.

## Redux의 작동방식

Redux의 작동을 돕는 함수 혹은 객체에는 크게 `Action`, `Reducer`, `Store`, `View`, `view-layer-binding` 이 있다. 각각의 역할에 대한 설명을 하면서 작동방식을 설명하도록 하겠다.

1. `View` 에서 이벤트가 발생하면 그에 맞는 `Action` 이 생성자에 의해서 생성되고, 이를 `Store` 에 전달(dispatch)한다.

`Action` 은 스토어의 상태가 '어떻게' 변경될것인지에 대한 명세서라고 생각하면된다. 순수 JavaScript 객체로 이루어져있으며, 고유한 `type` 값을 통해서 다른 `Action` 들과 구분된다.

이 `Action` 객체는 `Action Creator` 라는 함수를 통해서 반환되는 형태로 실제로 사용된다.(직접 `Action` 객체를 가져와서 사용하지 않는다.)

간단히 설명하면 `Store` 는 상태를 트리구조로 저장하는 컨테이너를 의미한다.

2. `Store` 가 현재 상태트리와 전달받은 `Action` 을 `Root Reducer` 에 전달한다.

`Reducer` 는 위에서도 간략하게 소개했지만, `Action` 에 명세된대로 실제로 변경을 발생시키는 함수이다. 이 `Reducer` 들은 하나의 `Reducer` 로 합쳐져서 관리되며, 그 최상단에 있는것이 `Root Reducer` 이다.

3. `Root Reducer` 가 전달받은 상태트리를 분할한뒤, `Action` 에 맞는 `Sub Reducer` 로 전달한다.

4. `Sub Reducer` 가 `Action` 대로 상태트리를 변경한뒤에, `Root Reducer` 로 전달한다.

이때, `Reducer` 는 상태를 복사한 후에, 그 복사된 내용을 수정해서 다시 반환하는 순수함수(pure-function)로 작성된다.

5. 모든 `Sub Reducer` 가 상태변경을 완료하면, `Root Reducer` 는 이를 다시 상태트리로 만들어 `Store` 에 전달한다.

6. `Store` 는 전달받은 상태트리를 현재 상태트리와 바꾼다.

7. `Store` 가 `view-layer-binding` 을 통해서 상태트리가 변경됐음을 구독된 `View` 에 알려준다.

`view-layer-binding` 은 `Store` 와 `View` 가 서로 쉽게 상호작용할 수 있도록 돕는 중간 매개체 역할을 해준다.

8. `view-layer-binding` 이 새로운 상태트리를 `Store` 로부터 전달받고, `View` 가 이를 적용한다.

엄청나게 복잡하다고 생각할 수 있지만, 사실 단순한 패턴을 갖고있는것이 Redux이다.